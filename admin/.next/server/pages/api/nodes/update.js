"use strict";(()=>{var e={};e.id=305,e.ids=[305],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},867:e=>{e.exports=import("csv-parse/sync")},142:e=>{e.exports=import("csv-stringify/sync")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")},948:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>c,default:()=>u,routeModule:()=>l});var o=s(802),d=s(44),n=s(249),a=s(928),i=e([a]);a=(i.then?(await i)():i)[0];let u=(0,n.l)(a,"default"),c=(0,n.l)(a,"config"),l=new o.PagesAPIRouteModule({definition:{kind:d.x.PAGES_API,page:"/api/nodes/update",pathname:"/api/nodes/update",bundlePath:"",filename:""},userland:a});r()}catch(e){r(e)}})},928:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>handler});var o=s(147),d=s.n(o),n=s(17),a=s.n(n),i=s(867),u=s(142),c=e([i,u]);function handler(e,t){if("POST"===e.method)try{let{node_id:s,todos:r}=e.body;if(!s)return t.status(400).json({error:"node_id is required"});let o=a().join(process.cwd(),"..","nodes.csv"),n=d().readFileSync(o,"utf-8"),c=(0,i.parse)(n,{columns:!0,skip_empty_lines:!0}),l=c.findIndex(e=>e.node_id===s);if(-1===l)return t.status(404).json({error:"Node not found"});c[l].hasOwnProperty("todos")||(c[l].todos=""),c[l].todos=r||"";let p=(0,u.stringify)(c,{header:!0,columns:Object.keys(c[0])});d().writeFileSync(o,p,"utf-8"),t.status(200).json({success:!0,message:"Node updated successfully",node:c[l]})}catch(e){console.error("Error updating node:",e),t.status(500).json({error:"Failed to update node"})}else t.setHeader("Allow",["POST"]),t.status(405).end(`Method ${e.method} Not Allowed`)}[i,u]=c.then?(await c)():c,r()}catch(e){r(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[222],()=>__webpack_exec__(948));module.exports=s})();